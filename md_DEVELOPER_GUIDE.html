<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Majoranapp: Developer guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Majoranapp
   </div>
   <div id="projectbrief">A C++ library for studying MZM in non-interacting systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_DEVELOPER_GUIDE.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Developer guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Table of contents</h2>
<ul>
<li><a href="#developer-guide">Developer guide</a><ul>
<li><a href="#table-of-contents">Table of contents</a></li>
<li><a href="#adding-new-term">Adding new term</a><ul>
<li><a href="#term-implementation">Term implementation</a></li>
<li><a href="#include-the-header">Include the header</a></li>
<li><a href="#connection-repacking">Connection repacking</a></li>
<li><a href="#term-summary">Term Summary</a></li>
</ul>
</li>
<li><a href="#adding-new-model">Adding new model</a><ul>
<li><a href="#implement-the-model">Implement the model</a></li>
<li><a href="#model-summary">Model Summary</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Adding new term</h2>
<p>The program supports <a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a>, which can be written in the following form</p>
<div class="image">
<img src="https://latex.codecogs.com/svg.latex?%5Chat%20H%20%3D%20%5Ctext%20i%20%5Csum_%7Bij%7D%20H_%7Bij%7D%20%5Cgamma_i%20%5Cgamma_j" alt="hamiltonian"/>
</div>
<p>A detailed explanation of the algorithm can be found in the [paper][pub].</p>
<p>Consider the implementation of <code><a class="el" href="classSpinfull_1_1ChemicalTerm.html" title="chemical potential term  ">Spinfull::ChemicalTerm</a></code>, which describes on-site chemical potential interaction. Chemical potential term (for spinfull systems) can be written in the following form</p>
<div class="image">
<img src="https://latex.codecogs.com/svg.latex?%5Cmu_i%20%28%5Chat%20n_%7Bi%5Cuparrow%7D&plus;%5Chat%20n_%7Bi%5Cdownarrow%7D%29%20%3D%20-%5Ctfrac%7B%5Ctext%20i%5Cmu_i%7D%7B2%7D%28%20%5Cgamma_%7Bi%5Cuparrow%7D%5E&plus;%5Cgamma_%7Bi%5Cuparrow%7D%5E-&plus;%20%5Cgamma_%7Bi%5Cdownarrow%7D%5E&plus;%5Cgamma_%7Bi%5Cdownarrow%7D%5E-%20%29" alt="chemical"/>
</div>
<p>An example of how to implement new terms will be demonstrated below (based on <code><a class="el" href="classSpinfull_1_1ChemicalTerm.html" title="chemical potential term  ">Spinfull::ChemicalTerm</a></code>).</p>
<h3>Term implementation</h3>
<p>Implementation of <code><a class="el" href="classSpinfull_1_1ChemicalTerm.html" title="chemical potential term  ">Spinfull::ChemicalTerm</a></code> for spinfull systems is attached below</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">class ChemicalTerm</div><div class="line">{</div><div class="line">public:</div><div class="line"></div><div class="line">    template &lt;class T&gt;</div><div class="line">    static void Fill(Hamiltonian&lt;T&gt; &amp;ham, double mu, int i)</div><div class="line">    {</div><div class="line">        ham.InsertBlock(Gamma::UpPlus, i, Gamma::UpMinus, i, -0.5 * mu);</div><div class="line">        ham.InsertBlock(Gamma::DownPlus, i, Gamma::DownMinus, i, -0.5 * mu);</div><div class="line">    }</div><div class="line"></div><div class="line">    static const std::string name;</div><div class="line">    static constexpr size_t locality{1};</div><div class="line">};</div><div class="line"></div><div class="line">const std::string ChemicalTerm::name{&quot;mu_potential&quot;};</div></div><!-- fragment --><p>All classes, which represent <a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a>'s term must have a template member function</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">template &lt;class T&gt;</div><div class="line">static void Fill(Hamiltonian&lt;T&gt; &amp;ham, args...)</div><div class="line">{</div><div class="line">    //...</div><div class="line">}</div></div><!-- fragment --><p>and two <code>const(expr)</code> variables:</p>
<ul>
<li><code>static const std::string name</code> term ID used e.g. for input scripts;</li>
<li><code>static constexpr size_t locality</code> number of sites related to the term.</li>
</ul>
<p>To implement the term of the <a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a>, one needs to use the <code><a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a>&lt;T&gt;</code> member function <code>.InsertBlock</code>, which has the following syntax</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">ham.InsertBlock(gamma1, site1, gamma2, site2, value);</div></div><!-- fragment --><p>where <code>gamma1</code> is the first gamma in the term and the <code>site</code> is corresponding site number to the <code>gamma1</code>. <code>gamma2</code> and <code>site2</code> is the second operator defined in the term. <code>value</code> is potential value of the term excluding imaginary unit i (imaginary unit is implied). <code>gamma1</code> and <code>gamma2</code> are <code>enum class</code> for Majorana operator enumeration</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">enum class Gamma</div><div class="line">{</div><div class="line">    UpPlus = 0,</div><div class="line">    UpMinus = 1,</div><div class="line">    DownPlus = 2,</div><div class="line">    DownMinus = 3</div><div class="line">};</div></div><!-- fragment --><p>This enumeration class is used for the enumeration of <a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a>'s matrix rows and columns.</p>
<p>All implemented terms in the program can be found in <code>Majoranapp/Majoranapp_bits/SpinfullFiller/.</code> and <code>Majoranapp/Majoranapp_bits/SpinlessFiller/.</code>.</p>
<h3>Include the header</h3>
<p>New terms must be included in <code><a class="el" href="Filler_8hpp.html">Majoranapp/Majoranapp_bits/Filler.hpp</a></code> file.</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">// ...</div><div class="line">#include &quot;SpinfullFiller/ChemicalTerm.hpp&quot;</div><div class="line">// ...</div></div><!-- fragment --><h3>Connection repacking</h3>
<p>To enable defined connections by the user for newly implemented terms to work with JSON script, one has to modify the <code><a class="el" href="ConnectionsFiller_8hpp.html">Majoranapp/Majoranapp_bits/ConnectionsFiller.hpp</a></code>. Depending on the namespace <code><a class="el" href="namespaceSpinfull.html">Spinfull</a></code>, <code><a class="el" href="namespaceSpinless.html">Spinless</a></code> or other, one has to add a new term to the corresponding function <code>static void SpinfullSwitch</code> or <code>static void SpinlessSwitch</code>, by expanding the function with the following code</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">template &lt;class T&gt;</div><div class="line">static void SpinfullSwitch(</div><div class="line">    Hamiltonian&lt;T&gt; &amp;hamiltonian,</div><div class="line">    Connections &amp;connections,</div><div class="line">    const std::string &amp;name)</div><div class="line">{</div><div class="line">// ...</div><div class="line">    ConnectionsRepacking&lt;T, Spinfull::ChemicalTerm&gt;(hamiltonian, connections, name);</div><div class="line">// ...</div><div class="line">}</div></div><!-- fragment --><h3>Term Summary</h3>
<p>To implement a new term:</p>
<ol type="1">
<li>Create a header file of the new term in <code>Majoranapp/Majoranapp_bits/SpinfullFiller/.</code>, <code>Majoranapp/Majoranapp_bits/SpinlessFiller/.</code> or other namespaces than <code><a class="el" href="namespaceSpinfull.html">Spinfull</a></code>/<code><a class="el" href="namespaceSpinless.html">Spinless</a></code>;</li>
<li>Include header in <code><a class="el" href="classFiller.html" title="static class for spinfull model term filler ">Filler</a></code>: <code><a class="el" href="Filler_8hpp.html">Majoranapp/Majoranapp_bits/Filler.hpp</a></code>;</li>
<li>Update appropriate function in <code><a class="el" href="ConnectionsFiller_8hpp.html">Majoranapp/Majoranapp_bits/ConnectionsFiller.hpp</a></code>;</li>
<li>Recompile.</li>
</ol>
<h2>Adding new model</h2>
<p>In this part of the tutorial implementation of the new models will be presented based on the <code>SpinlessUniformChainModel</code> implementation.</p>
<p>All implemented models can be found in <code>Majoranapp/Majoranapp_bits/Factory/.</code>.</p>
<h3>Implement the model</h3>
<p>Consider <code>SpinlessUniformChainModel</code> implementation:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">class SpinlessUniformChain : public DefaultViewer</div><div class="line">{</div><div class="line">public:</div><div class="line">    template &lt;class T&gt;</div><div class="line">    static Hamiltonian&lt;T&gt; Generate(QuantumSystem &amp;quantumSystem)</div><div class="line">    {</div><div class="line">        Dimensions &amp;dimensions = quantumSystem.dimensions;</div><div class="line">        Parameters &amp;parameters = quantumSystem.parameters;</div><div class="line"></div><div class="line">        int deg = 2;</div><div class="line">        double phase = 0.0;</div><div class="line">        int L = dimensions.GetLength();</div><div class="line"></div><div class="line">        // check width and height for warning</div><div class="line">        int W = dimensions.GetWidth();</div><div class="line">        int H = dimensions.GetHeight();</div><div class="line">        Info::DimensionsWarningOnly1D(L,W,H);</div><div class="line"></div><div class="line">        Hamiltonian&lt;T&gt; ham(L, deg);</div><div class="line"></div><div class="line">        // local</div><div class="line">        for (int i = 0; i &lt; L; i++)</div><div class="line">        {</div><div class="line">            Filler&lt;Spinless::ChemicalTerm&gt;::Fill(ham, parameters, i);</div><div class="line">        }</div><div class="line"></div><div class="line">        // non-local</div><div class="line">        for (int i = 0; i &lt; L - 1; i++)</div><div class="line">        {</div><div class="line">            Filler&lt;Spinless::KineticTerm&gt;::Fill(ham, parameters, i, i + 1);</div><div class="line">            Filler&lt;Spinless::ProxTerm&gt;::Fill(ham, parameters, i, i + 1, phase);</div><div class="line">        }</div><div class="line"></div><div class="line">        return ham;</div><div class="line">    }</div><div class="line"></div><div class="line">    static constexpr char name[] = &quot;SpinlessUniformChain&quot;;</div><div class="line">};</div></div><!-- fragment --><p>Each model implementation requires static member function</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">template &lt;class T&gt;</div><div class="line">static Hamiltonian&lt;T&gt; Generate(QuantumSystem &amp;quantumSystem)</div></div><!-- fragment --><p>and model name</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">static constexpr char  name[]</div></div><!-- fragment --><p>which is used as a model's ID in JSON script. <code>Generate(...)</code> function has an argument of a type <code><a class="el" href="classQuantumSystem.html" title="class containing all information about quantum system, which is needed for hamiltonian construction ...">QuantumSystem</a></code>. In <code><a class="el" href="classQuantumSystem.html" title="class containing all information about quantum system, which is needed for hamiltonian construction ...">QuantumSystem</a></code> all information about the system is stored (dimensions, parameters, connections, etc.). The model implementation is straightforward. First, all needed dimensions</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">    Dimensions &amp;dimensions = quantumSystem.dimensions;</div></div><!-- fragment --><p>dimensions</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">    Parameters &amp;parameters = quantumSystem.parameters;</div></div><!-- fragment --><p>are caught from <code>quantumSystem</code>. Then one needs to import dimensions <code>int L, W, H</code>, set the degree of the system <code>deg</code></p>
<div class="fragment"><div class="line">{c++}</div><div class="line">    int deg = 2; // spinless system, spinfull = 4</div><div class="line">    double phase = 0.0;</div><div class="line">    int L = dimensions.GetLength();</div><div class="line"></div><div class="line">    // check width and height for warning</div><div class="line">    int W = dimensions.GetWidth();</div><div class="line">    int H = dimensions.GetHeight();</div></div><!-- fragment --><p>In the implementation we used</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">    Info::DimensionsWarningOnly1D(L,W,H);</div></div><!-- fragment --><p>such command checks if <b>only</b> <code>L&gt;1 and W=H=1</code>, otherwise an appropriate notification will be display on the screen (note: chain is the one-dimensional system).</p>
<p>In the next step, users have to specify the explicit form of the <a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a>, by selecting the terms and connections. Then, the definition of the <a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a> object</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">    Hamiltonian&lt;T&gt; ham(L, deg);</div></div><!-- fragment --><p>system size (the number of sites = <code>L</code>) and degree of the system (<code>deg</code>) is specified.</p>
<p><code><a class="el" href="classFiller.html" title="static class for spinfull model term filler ">Filler</a>&lt;T&gt;</code> class is used to fill the <a class="el" href="classHamiltonian.html" title="Hamiltonian class for counting MZM in non-interacting systems. ">Hamiltonian</a> matrix elements, e.g. implementation of the uniform chemical potential interaction (<code>ChemicalTerm</code>) can be achieved by the following</p>
<p>``<code>c++ //</code>i<code>enumerates sites //</code>L` total number of sites (one-dimensional system) for (int i = 0; i &lt; L; i++) { // Note: first specify namespace <code><a class="el" href="namespaceSpinless.html">Spinless</a></code> // then the interaction type T Filler&lt;Spinless::ChemicalTerm&gt;::Fill(ham, parameters, i); } </p><div class="fragment"><div class="line">The presented above code snippet corresponds to the following Hamiltonian term</div><div class="line"></div><div class="line">![chemical term](https://latex.codecogs.com/svg.latex?%5Chat%20H_%5Cmu%20%3D%20%5Csum_i%20%5Cmu_i%20%5Chat%20n_i)</div><div class="line"></div><div class="line">Similarly, other terms of Hamiltonian, for the one-dimensional spinless chain can be adding (particle hopping and proximity effect of the superconductor)</div><div class="line"></div><div class="line">```c++</div><div class="line">    for (int i = 0; i &lt; L - 1; i++)</div><div class="line">    {</div><div class="line">        Filler&lt;Spinless::KineticTerm&gt;::Fill(ham, parameters, i, i + 1);</div><div class="line">        Filler&lt;Spinless::ProxTerm&gt;::Fill(ham, parameters, i, i + 1, phase);</div><div class="line">    }</div></div><!-- fragment --><p>Finally, one has to include a new model class in <code><a class="el" href="Factory_8hpp.html">Majoranapp/Majoranapp_bits/Factory.hpp</a></code> header to make it available in the program.</p>
<h3>Vector Viewers</h3>
<p>In the previous example, a defined class is derived from <code>public <a class="el" href="classDefaultViewer.html" title="displays vectors as unnumbered sites ">DefaultViewer</a></code>. By inheritance, the author of the model must select <code><a class="el" href="classVectorViewer.html" title="class for viewing eigenvectors ">VectorViewer</a></code> for the model. <code><a class="el" href="classVectorViewer.html" title="class for viewing eigenvectors ">VectorViewer</a></code> specifies how sites should be displayed in the result, e.g. <code><a class="el" href="classGrid2DViewer.html" title="displays vectors with sites numbered in 2D grid, ">Grid2DViewer</a></code> will map site number <em>i</em> in a two-dimensional grid layout: <em>i</em> -&gt;(<em>x,y</em>). <code>VectorViewers</code>, which are available, can be found in <code>Majoranapp/Majoranapp_bits/VectorViewers/.</code>. Current version support 3 different <code>VectorViewers</code></p>
<ul>
<li><code><a class="el" href="classDefaultViewer.html" title="displays vectors as unnumbered sites ">DefaultViewer</a></code>: no mapping, one-dimensional system;</li>
<li><code><a class="el" href="classGrid2DViewer.html" title="displays vectors with sites numbered in 2D grid, ">Grid2DViewer</a></code>: two-dimensional grid mapping: <em>i</em> -&gt; (<em>x,y</em>);</li>
<li><code><a class="el" href="classGrid3DViewer.html" title="displays vectors with sites numbered in 3D grid, ">Grid3DViewer</a></code>: three-dimensional grid mapping: <em>i</em> -&gt; (<em>x,y,z</em>);</li>
</ul>
<h3>Models repacking</h3>
<p>To make the model name available from the JSON input script, one has to modify the <code><a class="el" href="classModelSelector.html" title="selecting model through name ">ModelSelector</a></code> class. In <code><a class="el" href="ModelSelector_8hpp.html">Majoranapp/Majoranapp_bits/Parsers/ModelSelector.hpp</a></code> in function</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">template &lt;class T&gt; static auto SelectModel(QuantumSystem &amp;quantumSystem)</div></div><!-- fragment --><p>It can be achieved by adding appropriate <code>case</code> with <code>GetHamiltonian&lt;T1,T2&gt;</code> function in the <code>switch</code> sequence</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">// ...</div><div class="line">    case str2int(SpinlessUniformChain::name):</div><div class="line">        return GetHamiltonian&lt;SpinlessUniformChain,T&gt;(quantumSystem);</div><div class="line">// ...</div></div><!-- fragment --><h3>Model Summary</h3>
<p>To implement a new model</p>
<ol type="1">
<li>Create header file of new model in <code>Majoranapp/Majoranapp_bits/Factory/.</code>;</li>
<li>Make sure that <code><a class="el" href="classVectorViewer.html" title="class for viewing eigenvectors ">VectorViewer</a></code> is specified for the model (parent class);</li>
<li>Inlude new model in the <code><a class="el" href="Factory_8hpp.html">Majoranapp/Majoranapp_bits/Factory.hpp</a></code>;</li>
<li>Update apropriete function in <code>Majoranapp/Majoranapp_bits/Parser/ModelSelector.hpp</code>. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jun 9 2020 18:31:31 for Majoranapp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
